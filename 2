resource "azurerm_linux_virtual_machine" "testingvm" {
  name                        = "testingvm"
  resource_group_name         = var.resource_group_name
  location                    = var.location

  size                        = "Standard_D2s_v4"
  network_interface_ids       = [azurerm_network_interface.testingvm.id]

  admin_username              = "azureuser"

  source_image_id             = "/subscriptions/MY_SUBSCRIPTION/resourceGroups/myrg/providers/Microsoft.Compute/galleries/myGallery/images/myImage/versions/1.0.0"

  os_disk {
    name                      = "testingvm-os"
    caching                   = "ReadWrite"
    storage_account_type      = "Premium_LRS"
  }

  admin_ssh_key {
    username                  = "azureuser"
    public_key                = module.vm_key_pair.pair_key_pub_value_openssh
  }
}
